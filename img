import requests
import json
import os

search_term = input('Enter search term: ')

cse_id = ""
api_key = ""

url = f"https://www.googleapis.com/customsearch/v1?q={search_term}&num=1&start=1&searchType=image&key={api_key}&cx={cse_id}"

response = requests.get(url)
response.raise_for_status()

search_results = response.json()
image_url = search_results['items'][0]['link']

# Determine the image extension
file_extension = os.path.splitext(image_url)[1]
filename = f'{search_term}_image{file_extension}'

# Download the image and save it
response = requests.get(image_url)
with open(filename, 'wb') as out_file:
    out_file.write(response.content)

print('Image downloaded:', filename)
