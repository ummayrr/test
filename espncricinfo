from bs4 import BeautifulSoup
import requests
import re
import calendar

date = input("Please enter the date in MM/DD format: ")

month, day = date.split('/')

month = calendar.month_name[int(month)].lower()

url = f"https://www.espncricinfo.com/on-this-day/cricket-events/{month}/{day}"
date2 = f"{day} {month.capitalize()}"

response = requests.get(url)

soup = BeautifulSoup(response.text, 'html.parser')

divs = soup.find_all('div')

unique_div_texts = set()

for i, div in enumerate(divs):
    text = div.text.strip()

    if len(text) >  1350:
        continue

    if re.match(r'^\d{4}', text):
        lower_text = text.lower()
        if 'pakistan' in lower_text:
            count_pakistan = lower_text.count('pakistan')
            if not (count_pakistan == 1 and ('against pakistan' in lower_text or 'over pakistan' in lower_text or 'and a tour to pakistan' in lower_text or 'caught short by pakistan' in lower_text or 'played three three tests for england in pakistan' in lower_text or 'with pakistan bowlers dropping' in lower_text or 'after nazar mohammad of pakistan' in lower_text or 'return to the side in 2015' in lower_text or 'famous test win over pakistan in harare' in lower_text or 'ending pakistan' in lower_text or 'conquered pakistan' in lower_text or re.search(r'against .* and pakistan', lower_text) or re.search(r'against .*, pakistan', lower_text) or re.search(r'against .*, and pakistan', lower_text) or re.search(r'against .*, .*, and pakistan', lower_text) or re.search(r'against .*, .*, .*, and pakistan', lower_text))):
              if text not in unique_div_texts:
                    text = text.replace('\n', ' ')
                    year = re.search(r'\b\d{4}\b', text).group()
                    formatted_text = text.replace(year, '',  1).strip()
                    print(f"{date2} {year}: {formatted_text}")
                    unique_div_texts.add(text)
